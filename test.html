<!doctype html>
<html>
<title>test</title>
<body>
<input onclick="openWindow()" type="button" value="open window">
<span id="features"></span><br>
<script>

function onoff(s) {
  return { name: s, options: ["", s, s + "=yes", s + "=no"] };
}
function num(s) {
  return { name: s, options: ["", s + "=0", s + "=100", s + "=500"] };
}

let featureList = [
  onoff("location"),
  onoff("menubar"),
  onoff("resizable"),
  onoff("scrollbars"),
  onoff("status"),
  onoff("titlebar"),
  onoff("toolbar"),

  onoff("close"),
  onoff("minimizable"),
  onoff("personalbar"),

  num("left"),
  num("screenX"),
  num("top"),
  num("screenY"),
  num("width"),
  num("innerWidth"),
  num("height"),
  num("innerHeight"),

  onoff("background"),
  onoff("fullscreen"),
  onoff("noopener"),
  onoff("persistent"),

  onoff("foo"),
];

let table = document.createElement("table");
table.border = 1;

let featureSet = {};

for (let item of featureList) {
  let tr = document.createElement("tr");
  let first = true;
  for (let option of item.options) {
    let td = document.createElement("td");
    let label = document.createElement("label");
    let input = document.createElement("input");
    input.type = "radio";
    input.name = item.name;
    input.value = option;
    input.addEventListener("click", function() {
      featureSet[item.name] = option;
       update();
    });
    if (first) {
      input.checked = true;
      featureSet[item.name] = option;
      first = false;
    }
    label.appendChild(input);
    let text = document.createTextNode(option);
    label.appendChild(text);
    td.appendChild(label);
    tr.appendChild(td);
  }
  table.appendChild(tr);
}
document.body.appendChild(table);

let visibilityList = [
  "locationbar",
  "menubar",
  "personalbar",
  "scrollbars",
  "statusbar",
  "toolbar",
];

let visibilityTable = document.createElement("table");
visibilityTable.border = 1;

for (let name of visibilityList) {
  let tr = document.createElement("tr");

  let th = document.createElement("td");
  let text;
  if (window[name]) {
    text = "window." + name + ".visible";
  } else {
    text = "window." + name;
  }
  th.appendChild(document.createTextNode(text));

  tr.appendChild(th);

  let td = document.createElement("td");
  let text2;
  if (window[name]) {
    text2 = window[name].visible;
  } else {
    text2 = "doesn't exist";
  }
  td.appendChild(document.createTextNode(text2));

  tr.appendChild(td);
  visibilityTable.appendChild(tr);
}

document.body.appendChild(visibilityTable);

function getFeatures() {
var a = [];
for (let item of featureList) {
  a.push(featureSet[item.name]);
}
return a.filter(x => x).join(",");
}

function update() {
  document.getElementById("features").textContent = getFeatures();
}

function openWindow() {
  window.open(window.location.href, "", getFeatures());
}
</script>
</body>
</html>
